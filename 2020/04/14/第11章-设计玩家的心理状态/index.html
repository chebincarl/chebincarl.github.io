<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">





















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="思考并回答以下问题：  玩家玩得好时，要给予他们表扬。 劳作感是什么意思？如何避免？ 玩家在玩游戏时，如果不知道接下来该干什么，那么他会做的是放弃游戏。">
<meta name="keywords" content="大师谈游戏设计创意与节奏">
<meta property="og:type" content="article">
<meta property="og:title" content="第11章 设计玩家的心理状态">
<meta property="og:url" content="http://chebincarl.github.io/2020/04/14/第11章-设计玩家的心理状态/index.html">
<meta property="og:site_name" content="车斌的博客">
<meta property="og:description" content="思考并回答以下问题：  玩家玩得好时，要给予他们表扬。 劳作感是什么意思？如何避免？ 玩家在玩游戏时，如果不知道接下来该干什么，那么他会做的是放弃游戏。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-04-18T10:44:56.999Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第11章 设计玩家的心理状态">
<meta name="twitter:description" content="思考并回答以下问题：  玩家玩得好时，要给予他们表扬。 劳作感是什么意思？如何避免？ 玩家在玩游戏时，如果不知道接下来该干什么，那么他会做的是放弃游戏。">






  <link rel="canonical" href="http://chebincarl.github.io/2020/04/14/第11章-设计玩家的心理状态/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>第11章 设计玩家的心理状态 | 车斌的博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">车斌的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">专注，重复10遍</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://chebincarl.github.io/2020/04/14/第11章-设计玩家的心理状态/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chebin">
      <meta itemprop="description" content="记录自己的学习过程">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="车斌的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">第11章 设计玩家的心理状态

              
            
          </h1>
        

        <div class="post-meta">

          

          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-04-14 09:10:42" itemprop="dateCreated datePublished" datetime="2020-04-14T09:10:42+08:00">2020-04-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-04-18 18:44:56" itemprop="dateModified" datetime="2020-04-18T18:44:56+08:00">2020-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/游戏策划/" itemprop="url" rel="index"><span itemprop="name">游戏策划</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">8.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">8 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>思考并回答以下问题：</p>
<ul>
<li>玩家玩得好时，要给予他们表扬。</li>
<li>劳作感是什么意思？如何避免？</li>
<li>玩家在玩游戏时，如果不知道接下来该干什么，那么他会做的是放弃游戏。</li>
</ul>
<a id="more"></a>
<p>设计地图、安排敌人和道具、设置敌人的攻击力等统称为关卡设计。另外，创作游戏也叫游戏设计，从事游戏创作的人被称为游戏设计师。</p>
<p>可见，创作游戏就是一项设计工作。那么，创作游戏是在设计什么呢？答案是设计玩游戏者的心理。我们脑中想的是让玩家想什么、采取哪些行动获得何种情感变化，想的是如何才能达到上述目的。</p>
<p>这一章我们就来谈谈设计玩家心理的相关问题。</p>
<h1 id="玩得好要使劲表扬"><a href="#玩得好要使劲表扬" class="headerlink" title="玩得好要使劲表扬"></a>玩得好要使劲表扬</h1><p>谁都会为自己玩得好而高兴，此时游戏内如果不做任何反馈，这份喜悦之情是要减半的。所以，<span style="color:red">玩家玩得好时，要给予他们表扬。</span></p>
<p>表扬不是显示一句“你真棒！”就完事的，要利用一切可以利用的时机、特效、音效等来赞美玩家。举个例子，玩家挑战某一关的BOSS，如果给BOSS最后一击的同时画面暂停并显示出“过关”文字，玩家看了会是什么反应呢？八成是: “诶？打完了？呃……是我赢了？貌似是我赢了……给BOSS最后一击时，我们希望玩家能获得最为浓缩的“成功了！”的快感。这方面比较常见的手法是在最后一击命中的瞬间进入慢动作。玩格斗游戏的读者对此应该不陌生。慢动作之后，我们希望玩家能尽情享受成功带来的成就感、自己强大实力带来的优越感以及从紧张中解放出来的解脱感。所以，BOSS痛苦哀嚎之后最好来场壮观的爆炸，把BOSS炸个粉身碎骨。然后再伴着轻快的BGM痛快地显示出“第OO关过关！”字样，称赞玩家获得的荣誉。此时玩家正沉浸在满足感之中，所以不必再设置4秒之类的时限，要不遗余力地称赞玩家，让其尽可能地宣泄。要让玩家对这种快感难以忘怀，进而转化成挑战下一关卡的动力。这样一来，我们就能保证玩家以“耶！成功了！赢了！”的兴奋心情完成每一关的挑战了。</p>
<p>玩家完成挑战的瞬间处于最兴奋状态，所以我们要迎合玩家的心境，选择能进一步提升兴奋心情的演出画面。不过，再怎么拼命表扬也要有个度，关键在于迎合玩家当时的心境。</p>
<p>以RPG为例，在路边随随便便打开个宝箱，“铛铛铛铛”一阵夸张的音效之后结果只拿到一棵药草，你此时会怎么想？只会觉得心烦吧？区区药草而已，开个宝箱“叮”一声拿到手才合适。</p>
<p>如果把药草换成BOSS大本营的城堡大门钥匙呢？玩家历经重重苦难终于拿到了这把钥匙，自然应该有一些华丽的特效，烘托出“太棒啦！终于拿到啦！”的心情。此时玩家脑海中会像走马灯一样回放之前经历的苦难，进而享受此刻的成就感。</p>
<p>总而言之，此处的重点在于要考虑玩家当时抱有怎样的感慨、处于怎样的心情，进而选择质量及长度与其相符的画面来表扬玩家。</p>
<h1 id="失败瞬间最需要重视"><a href="#失败瞬间最需要重视" class="headerlink" title="失败瞬间最需要重视"></a>失败瞬间最需要重视</h1><p>前面说玩家玩得好要表扬，那么反过来失败的时候呢？其实，失败的瞬间比玩得好的瞬间更需要重视。人们玩得好的时候心情愉悦，会想继续玩下去。但是失败的时候，心中很可能萌生“到此为止”的念头。</p>
<p>那么，玩家在什么情况下会放弃游戏呢？首先是搞不清失败原因的时候。玩家觉得自己已经很好地应对了敌人的攻击，但还是被击败了，而且不知道为什么被击败：“被某种致命攻击打到了吗？但是完全没看到这类攻击啊？”这种情况相信不少人都遇到过。遇到这种情况时，玩家的游戏热情会逐渐削减，渐渐地开始一边玩一边找放弃游戏的借口，最终找到借口放弃游戏。</p>
<p>“这游戏没意思。”</p>
<p>仅此一句话，就轻轻松松地终结了一款游戏的寿命。</p>
<p>另外，有些时候玩家知道自己为什么失败，但是怎么也找不到规避失败的方法。比如有个会跳的大型BOSS，玩家想绕到BOSS身后时，可以趁BOSS跳起来从下面钻过去。结果BOSS落地很快，再加上每次跳跃高度都随机，玩家完全无法掌握起步的时机。最终，玩家在尝试了各种时机却全部失败后，渐渐地对游戏产生厌恶感。</p>
<h1 id="失败要合理"><a href="#失败要合理" class="headerlink" title="失败要合理"></a>失败要合理</h1><p>正如前面所说，失败的瞬间要重视起来。这时最大的问题是“合理性”。也就是说，必须在失败的瞬间让玩家明白哪里做得不对，如何才能避免。至少要让玩家对下一次尝试有一个展望。因为人们在想到“这样做应该能行吧？”的时候，很难按捺住去尝试一下的心情。若想提高失败的合理性必须让玩家能通过画面中的信息充分预测接下来将发生的事。就以刚才那个会随机大跳的BOSS为例，我们需要将跳跃模式固定成一种，或者让它两次小跳之后第三次必定大跳，总之必须让其行动有规律，保证玩家能够预测。即便要保留其行动的随机性，也应该在大跳前加上大幅弯曲膝盖的蓄力动作等，即在改变行动模式时向玩家释放信号，让玩家能够判断行动的时机。</p>
<p>玩《钻地小子》的时候经常遇到下面这种情况。玩家本来已经看到方块摇摇欲坠，却一不小心走到它下面被压死。此时玩家心中会想：“刚才我知道有危险，只是一不小心失误了。下次我知道时机怎么算了，肯定能过关！”于是这次游戏不算数，重新来过。玩家之所以认为这次失败合理，是因为他脑中明白“不同色的方块不能粘合在一起，它在下方被挖空之后会先摇晃几下再掉下来”这条简单的规则，认识到刚才的失败是因为自己判断失误。</p>
<p><span style="color:red">合理的失败会让玩家把责任归结到自己身上，所以他们会思考应对方案，进而去尝试。要是能如预期一样获得成功，那么喜悦的心情会进一步促使他们继续游戏。</span>形成“合理”-&gt;“下一步的战略”-&gt;“尝试”的思考循环之后，游戏的节奏就不会中断。此时的玩家找不到放弃游戏的借口他们会一直玩下去。</p>
<p>第8章中讲游戏失败画面时我们也提到过，要给玩家短暂的冷静时间（3秒左右），促使他们为下一次挑战做好心理准备，利用这段时间来“接受失败”和“制定战略”。</p>
<p>同样地，在讲重试画面时我们提到《钻地小子》的重试没有多余的画面演出，让玩家能立刻回到游戏起点重新开始。这是为了让玩家能通过自身的判断缩短失败到重试的时间。</p>
<p>需要一段时间来思考战略也罢，要立刻放弃本次游戏重新开始也罢，重点是让玩家能根据自己当时的心境选择他们需要的东西。</p>
<p>总而言之，游戏在玩家失败的瞬间最有可能被放弃。所以这里一定要多花些心思，保证节奏不中断。</p>
<h1 id="用地形和敌人的位置传递信息"><a href="#用地形和敌人的位置传递信息" class="headerlink" title="用地形和敌人的位置传递信息"></a>用地形和敌人的位置传递信息</h1><p>地图的地形，敌人、机关的位置都包含着向玩家传递的信息。</p>
<p>举个例子，某动作游戏在关卡开始时弹出窗口，内容如下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">敲击蓝色水晶球开启开关，移动平台取得大门钥匙之后走到大门处</span><br></pre></td></tr></table></figure>
<p>不可否认，这样一来任何人都能明白接下来该干什么，但玩家会觉得自己只是在做一些早已安排好的事，劳作感太强。这个“劳作感”是游戏最要不得的，所以我们要尽量不使用语言，让玩家自己去发现。</p>
<p>首先设计一段天花板很低的通道，前面放一把钥匙，保证玩家从这里经过时必然能捡到它。天花板设计这么低是为了防止玩家跳过钥匙。捡到钥匙之后，让钥匙旋转着飞向右上角的大门，紧接着“咔嚓”一闪，大门被打开。</p>
<blockquote>
<p>图11-1 地形与机关道具的摆放</p>
</blockquote>
<p>这样一来，玩家会明白“哈哈，原来捡这个道具能打开上锁的大门啊”。</p>
<p>接下来的房间内有水晶和平台，平台和大门的位置很高，玩家跳不上去。“大门开了肯定是让我过去，但怎么过去呢？这个水晶感觉和平台有关系，我敲一下试试。”于是玩家按下射击键，蓝色水晶发出白光，平台开始上下移动。“哈哈，原来这样可以开启开关让平台动起来。好嘞，接下来进门看看。”可见，抛开语言，单用地图和机关道具的位置就能向玩家传递信息。玩家能够从眼前的情况获取信息，推理接下来该做的事，进而找到破解谜题的方法。</p>
<p>不仅如此，由于我们成功地将钥匙与门的关系、水晶与移动平台的关系传递给了玩家，所以之后的关卡中可以进一步对这两种关系进行发挥，创造出更加复杂的机关。</p>
<p>人们在被别人指示做某件事情时不会有多少热情，但对于自己想出来的事却很难抑制住尝试的冲动。而且人们对推理正确，获得成功时的喜悦很容易上瘾，以至于越玩越想玩。</p>
<p>所以在设计地图地形、敌人的位置、道具的位置、机关的效果等内容时要多动脑筋，让所有人都觉得“是自己发现了解谜方法”。</p>
<h1 id="迷茫会破坏节奏"><a href="#迷茫会破坏节奏" class="headerlink" title="迷茫会破坏节奏"></a>迷茫会破坏节奏</h1><p><span style="color:red">玩家在玩游戏时，如果不知道接下来该干什么，那么他会做的是放弃游戏。</span>这样一来，我们费尽心思维持下来的节奏就全被破坏了。为避免这一情况发生，我们要保证玩家在游戏中不迷茫。</p>
<p>比如前面举的那个天花板按一定间隔伸缩尖刺的例子，我们不是上来就让玩家体验一大串连续落下来的尖刺，而是先找个能简单避开的地方让玩家体验一下，然后再进一步发展出新花样。“这些尖刺跟刚才那个规律一样，但这次是好几个连在一起。”在这种印象下，玩家根据前面体验的规律预想到自己可以冲过去。接下来便是将预想付诸实践，顺利躲开所有尖刺，获得“成功了！”的喜悦。这个话题我们将在第13章详细说明。</p>
<p>总之，我们要考虑游戏进行过程中每一个瞬间玩家在想什么、有什么感觉、是什么心情，然后想办法让玩家跟着我们设计的思路去想、去感觉，进而获得我们希望他获得的心情。这就是游戏的设计，即设计玩家的心理。</p>
<h1 id="玩游戏的原动力"><a href="#玩游戏的原动力" class="headerlink" title="玩游戏的原动力"></a>玩游戏的原动力</h1><p>这里我们思考一个问题：人们玩游戏的原动力是什么？人们在何种心情下最想把游戏玩下去呢？能列举出来的心情有很多，比如开心时、不甘时、寻求满足时、寻求胜利时、想炫耀时、想被人称赞时、想与其他人交流时、想帮助别人时、想获得谈资与朋友聊天时等。下面我们一个一个来看。</p>
<h2 id="1、开心、不甘"><a href="#1、开心、不甘" class="headerlink" title="1、开心、不甘"></a>1、开心、不甘</h2><p>首先是玩得顺风顺水开心的时候。做好力所能及的事情并不会让人觉得开心，只有在不知是否能做好、心怀忐忑的情况下，我们才会获得“成功了！”的感受，所以摆在玩家面前的课题要有适当的难度。所谓适当，就是让玩家觉得自己有可能成功。一旦玩家觉得课题超出了自己的能力他就会放弃游戏，所以要找到即将超出却还没超出的临界点，而且要让玩家知道如何做能够成功，保持一种有机会但是没有十足把握的状态。</p>
<p>在这个临界点下，玩家失败时会产生不甘的情绪。超出自身能力的课题也能暂时吸引玩家重新挑战，但过不多久他们就会放弃。此时人们不会觉得不甘心，而是会用一句“这游戏没意思”把自己的失败抛诸脑后。</p>
<p>因此，就像我之前讲过的，玩得好时如何表扬、失败时如何告诉玩家原因都是非常重要的。而且这里需要有张有弛，要把引起开心或不甘情绪的契机集中到一点。这样说各位可能不太明白，我用运动会的100m跑来打个比方。运动员听到“预备，砰！”起跑，撞到终点彩带的瞬间感受到“赢了！”的喜悦。正因为胜负的判定都集中到了撞线这一点上，赢了的喜悦和输了的不甘才得到浓缩，获得了最大的效果。</p>
<p>集中度随着到终点的距离逐渐增大，在撞线的一瞬间释放出来，这就是100m跑的节奏。如果不知道终点在哪里，跑着跑着突然有人跟你说“赢了”“输了”，你会是什么反应呢？开心或不甘之前先会“诶？”吧？</p>
<p>再举一个运动会的例子，那就是投球入篮，这项运动与100m跑不同，它本身有时间限制，限制时间结束后公布结果。不过各位想想看，在公布结果之前先要统计球数对吧？此时要把球从双方的篮子里一个一个地取出：“一个、两个…”在一方没有球了的瞬间决出胜负。所以投球人篮的节奏是先抵达终点，然后集中度随着一个一个地数球逐渐增强，在一方没球了的瞬间释放出来。</p>
<blockquote>
<p>投球入篮: 日本学校运动会的常见项目，参与者分成两队，分别向自己队伍的篮子里投球，最终投入总数较多者获胜。</p>
</blockquote>
<p>各位不妨问想一下电视里的竞赛型节目，他们是如何显示最后得分的呢？双方的计分板先是“唰唰唰唰唰”地高速旋转，然后“叮”地一声显示出双方得分，或者先显示一方的得分，另一方继续旋转，让人猜不透到底谁赢谁输，等到观众的胃口都被吊起来了，突然“叮”一声再显示出另一方得分。当然这只是其中之一，这类节目的节奏还有很多种。</p>
<p>总而言之，人们是在看到结果的瞬间产生情绪波动的，所以公布结果的节奏直接影响到玩家开心、不甘这两种情绪的强烈程度。</p>
<h2 id="2、寻求满足"><a href="#2、寻求满足" class="headerlink" title="2、寻求满足"></a>2、寻求满足</h2><p>人类是一种有收集欲的生物。收集喜欢的东西，把它们按一定顺序排列出来会让心情变得舒畅。如果这些东西不是按顺序得到的，而是零零散散到手的呢？比如一套书有10卷，你唯独没有第7卷会怎么样呢？会想尽办法拿到第7卷对吧？</p>
<p>可见，在有可收集元素的情况下，人们通常会想把它收集齐全。要想助长这种情绪，我们需要一个能把当前已获得元素按顺序陈列起来的版块。“已获得100枚中的87枚”确实也有促使人收集其余13枚的效果，但把100枚卡片全都排列在一个画面里时，那些未收集到的卡片空栏就会让人觉得像缺了颗牙似的，更想把它们补齐。</p>
<p>这与人们喜欢把读完的小说摆在书架上欣赏是同样道理。我们需要有这样一个能显示出完成度的直观视觉体验。如果能在获得收集元素时添加至一览表时以及完成时根据玩家当时的心境安排适当的特效，其效果自然更加明显。这里还要重视稀有度的平衡性，越稀有的东西特效要越夸张。</p>
<p>接下来要说的一点会涉及调整方面的问题，那就是收集元素的总量决定了玩家在游戏中获得收集元素的大致时间点。我们要对获得收集元素的频率（玩几次获得一个）心里有数，因为它决定了收集机制的节奏。</p>
<p>以一天玩一小时为前提，玩一次大概能获得一个的道具与玩两三次才能获得一个的道具相比，其价值和在玩家心中的分量截然不同。设计获取收集元素的节奏时务必要再三思量，在此基础上决定元素的量与质。假设某游戏玩家每次玩5分钟，玩3次能抽1次奖，那么就是每15分钟能抽1次。玩1小时可以抽4次，玩1个月能获得120个道具。于是我们可以让其中100个为常见道具，15个为稀有道具，5个为超稀有道具。</p>
<p>换成玩1次游戏能获得10个金币，集齐300个金币能抽1次奖呢？那就意味着玩家要玩30次才能抽1次奖。同样假设每次5分钟，30次就是两个半小时，所以抽1次奖大概要玩两三天，1个月只能抽12次。这样一来，奖品必须是非常具有价值的才行。</p>
<p>可见，获取收集元素的节奏跟收集元素的质及量之间有着密切关系。心理学中有“期望理论”一词，当人们发现自己只要努力就有可能达成目标时很容易获得动力。日常生活中常见的收集印章的小活动就是个很好的例子，它总能让人不自觉地想集齐所有印章，相信各位也深有体会。</p>
<h2 id="3、寻求胜利"><a href="#3、寻求胜利" class="headerlink" title="3、寻求胜利"></a>3、寻求胜利</h2><p>人类在有竞争的情况下会热血沸腾，不需要什么理由。与别人竞争，特别是与身边人竞争都能让人热情高涨。为了获得胜利，人们会选择私底下偷偷练习，这就创造了更多玩游戏的动机。</p>
<p>2005年11月，一款游戏的发售让任天堂DS势不可挡地普及了起来，那就是任天堂的《东北大学未来科学技术共同开发中心川岛隆太教授监修成人脑力锻炼DS》，通称《脑锻炼》。这款游戏源于2003年11月发售的《川岛隆太教授之脑力锻炼成人计算练习》《川岛隆太教授之脑力锻炼成人音读练习》两本书。这两本在当年引起热潮、销售量超100万册的书实际上主要是面向老年人的，目的是预防老年痴呆，其购入者也基本都是60岁以上的老年人。</p>
<p>由于书籍本身的性质，这两本书内没有任何煽动性的节奏，结构温和随性。不过，在改编为游戏时，设计者加入了“大脑年龄”的新概念。这样一来，《脑锻炼》的受众就从老年人一下子扩展到了所有年龄层。游戏引入了非常具有游戏特征的机制，玩家要随着节奏回答接踵而至的问题，游戏最后将公布玩家的大脑年龄。自己的大脑几岁？朋友或家人的大脑几岁？玩家看到自己更年轻时会感到开心，看到自己年纪更大则会心怀不甘。</p>
<p>大脑年龄的创意让《脑锻炼》从单纯的“锻炼”进化成了“竞争”，所以成功地吸引了所有年龄层人士的注意。</p>
<h2 id="4、想炫耀"><a href="#4、想炫耀" class="headerlink" title="4、想炫耀"></a>4、想炫耀</h2><p>人们喜欢把自己优于他人的东西拿出来炫耀。拥有别人没有的东西时，会有拿出来让别人羡慕的冲动，所以向玩家提供“拿给别人看”的机会十分重要。近年来，玩家在游戏中打出高分时可以轻松地通过网络进行共享，比如发到Facebook，Twitter，通过LINE通知朋友，上传游戏视频到视频网站等。借助这些手段，我们能更轻松地向玩家提供炫耀的环境。</p>
<p>至于被炫耀的一方，除了一部分不以为然的人之外，大多会出于羡慕而产生“自己也想有”的冲动，进而促使他们去玩游戏。</p>
<p>为了创造炫耀的资本，我们可以设置一些非常难以获取的稀有道具，或者引入头像、角色、车子等的自定义机制，让玩家展现自己的个性，因为人类有表现“自己和别人不同”的欲望。然而很矛盾的是，人类还有表现“自己与别人相同”的欲望，所以人们会想通过多玩游戏获得那些别人有的东西。</p>
<p>《动物之森》就是一个以该机制成功的例子。这款游戏最初在任天堂64上发行，当时只有很少一部分人支持。因为在那个时代要想共享、炫耀自己的村子，必须把存档包复制下来带到别人家里读取才行。但是在任天堂DS上发售之后，擦肩通讯功能使得玩家只需拿着机器擦肩而过即可达到共享目的，让《动物之森》突然大热。</p>
<p>最后讲一个关于隐藏道具及稀有道具效果的个人观点。我一向认为，好东西所有人都想要，因此应该让所有人都能得到。举个例子，比如游戏中最强的武器非常厉害，连大型敌人都能一下子消灭掉，让人感觉非常爽。现在假设这个武器的获取条件是零失误通过隐藏的超难关卡。这样一来，能拿到它的只有很小一部分游戏高手。它是攻克了超难关卡的证明，所以拿着它自然能够炫耀。但要知道，它带来的爽快感是所有玩家都向往的东西，然而初学者和普通玩家虽然知道游戏中有这个武器，却很清楚自己不可能达到条件，所以看到这种武器时，他们心里会觉得这款游戏对自己很不友好。</p>
<p>反过来，对于能零失误攻克超难关卡的那些玩家而言，只要有个能证明荣耀的东西就足可以拿来炫耀了，不必非得是什么最强武器，比如标题画面的LOGO闪着金光或者旁边加个小☆标志之类的就足够了。</p>
<p>或者，最强武器的获取条件可以不与过关挂钩，比如设置成游戏次数达到300次的奖励。这样一来，任何水平的玩家只要花费的时间足够都能完成条件拿到它。但这种时候，一定要在条件的次数上找到一个平衡点，既保证高端玩家的自尊心不受损害，又要让初学者不觉得难如登天。</p>
<h2 id="5、想与其他人交流"><a href="#5、想与其他人交流" class="headerlink" title="5、想与其他人交流"></a>5、想与其他人交流</h2><p>社交网络发展至今，手边的智能机已经能让我们与其他人时刻保持交流了。人类是一种社会性的生物，追求与其他人的交流可以说是本能之一。</p>
<p>游戏方面也是一样，人与人交流的模式虽然从很早以前就有，比如早期电子网球游戏两人坐在一起对战，或者两台机器有线连接在一起玩对战格斗等，但现在我们已经可以通过网络轻松地与世界各地的陌生人对战交流了。</p>
<p>基本上，人与人玩游戏的时候玩什么都有意思。就比方说猜拳，与电脑玩就很没意思，输了还会怀疑电脑作弊，但与人玩就牵扯到对手的性格等，能玩得十分起劲。要是再赌上今天的晚饭谁付账，那就更是一场血战了。可见，与人的交流对提升游戏趣味性有着莫大的贡献。然而今时今日，发达的社交网络往往让人与人之间的联系过于紧密，反而给我们增添了一些压力。从游戏的基本是“舒服”的角度来看，这并不是一个好现象。所以最理想的机制是玩家想交流时随时随地可以建立联系，不想交流时能在不损害对方情绪的前提下随时断开。</p>
<p>对于这方面的探究，今后我们还有很长的路要走。</p>
<h2 id="6、想帮助别人"><a href="#6、想帮助别人" class="headerlink" title="6、想帮助别人"></a>6、想帮助别人</h2><p>人们喜欢胜过别人彰显自己的优越，同样地，人们还喜欢帮助别人以获得感谢。现今的网络发展已经让我们能轻松满足玩家的此类需求。</p>
<p>网络游戏中，高手之所以愿意与新人组队手把手传授游戏技巧，都是因为他们这方面的需求得到了满足。获得帮助的一方会心怀感激地向他们说“谢谢”，这是一种无可替代的奖励。</p>
<p>网络的匿名性虽然有时会引发人们“互喷”等负面的攻击性，但它同样拂去了人们与人为善时的那份羞涩。特别是在游戏中，玩游戏往往使人更加坦率。如今的游戏开场部分常常做得像电影开篇一般，但早期游戏中很多都是国王一句“从魔怪手中拯救世界吧”，玩家一句“遵命”，便踏上征程，毫无疑惑。</p>
<p>如果电影也这样开篇呢？想必这种融入感全无的电影会让不少观众直接起身离场吧。可以看出，游戏让人们的思维变得如此纯粹。所以我时常默默地想，游戏让人与人紧密联系互相帮助的机制，或许有一天能带来世界和平。</p>
<h2 id="7、想获得谈资与朋友聊天"><a href="#7、想获得谈资与朋友聊天" class="headerlink" title="7、想获得谈资与朋友聊天"></a>7、想获得谈资与朋友聊天</h2><p>人类是一种需要交流的生物，与身边的人对话在生活中有着重要意义，所以人们会热衷于能提供共同话题的东西。我们的生活中，有相当多人以游戏为共同话题，这些人为了第二天仍然有话可谈，今天必须继续玩游戏。这也是让人无法放弃游戏的因素之一。</p>
<p>为了形成交流，人们需要使用共通的语言。于是玩家记忆游戏用语，用它们来对话，进而形成交流的感觉。在不玩这款游戏的人眼中，他们就是一群用未知语言交流的外国人。这种小交流圈子让人们萌生加入其中的欲望，从而产生继续玩游戏的动机。</p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>第11章我们讲了如何触动人的内心以及设计玩家的心理。接下来第12章我们将聊一聊让游戏寿命更久需要做的事。</p>
<h1 id="专栏"><a href="#专栏" class="headerlink" title="专栏"></a>专栏</h1><h2 id="对不同的程序员用不同方式聊需求"><a href="#对不同的程序员用不同方式聊需求" class="headerlink" title="对不同的程序员用不同方式聊需求"></a>对不同的程序员用不同方式聊需求</h2><p>程序员也是人，也有不同的类型。长期从事研究工作的往往擅长技术，给这些人写需求书时候最好写上有节奏有关的具体数值，比如30帧淡出、6帧淡入等。也就是说，让他们先把这些需求实现出来，之后我们再做调整。这种时候，务必记得添一句“给策划层留下调整数值的余地”。</p>
<p>有些程序员喜欢游戏，对游戏的品味也很不错。对于这些人，要让他们对有趣的节奏有一个正确的印象。一些他们比较感兴趣的特效部分可以一定程度上由他们“全权负责”，这样有助于提升工作热情。</p>
<p>总之，关键在于要观察对方喜欢什么、擅长什么、不擅长什么、讨厌什么，因人而异地选择不同方式来聊需求。要知道，最大限度激发程序员能力也是策划层的职责之一。</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/大师谈游戏设计创意与节奏/" rel="tag"># 大师谈游戏设计创意与节奏</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/04/14/第10章-为节奏添加变化/" rel="next" title="第10章 为节奏添加变化">
                <i class="fa fa-chevron-left"></i> 第10章 为节奏添加变化
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/04/15/Laravel中通过Macroable宏来扩展类的能力/" rel="prev" title="Laravel中通过Macroable宏来扩展类的能力">
                Laravel中通过Macroable宏来扩展类的能力 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Chebin">
            
              <p class="site-author-name" itemprop="name">Chebin</p>
              <div class="site-description motion-element" itemprop="description">记录自己的学习过程</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">470</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">68</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          


          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <!-- modify icon to fire by szw -->
                <i class="fa fa-history fa-" aria-hidden="true"></i>
                近期文章
              </div>
              <ul class="links-of-blogroll-list">
                
                
                  <li>
                    <a href="/2020/06/03/第11章-接下来如何做/" title="第11章 接下来如何做" target="_blank">第11章 接下来如何做</a>
                  </li>
                
                  <li>
                    <a href="/2020/06/02/第10章-K最近邻算法/" title="第10章 K最近邻算法" target="_blank">第10章 K最近邻算法</a>
                  </li>
                
                  <li>
                    <a href="/2020/06/02/第9章-动态规划/" title="第9章 动态规划" target="_blank">第9章 动态规划</a>
                  </li>
                
                  <li>
                    <a href="/2020/06/02/第8章-贪婪算法/" title="第8章 贪婪算法" target="_blank">第8章 贪婪算法</a>
                  </li>
                
                  <li>
                    <a href="/2020/06/01/第7章-狄克斯特拉算法/" title="第7章 狄克斯特拉算法" target="_blank">第7章 狄克斯特拉算法</a>
                  </li>
                
              </ul>
            </div>
        

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#玩得好要使劲表扬"><span class="nav-number">1.</span> <span class="nav-text">玩得好要使劲表扬</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#失败瞬间最需要重视"><span class="nav-number">2.</span> <span class="nav-text">失败瞬间最需要重视</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#失败要合理"><span class="nav-number">3.</span> <span class="nav-text">失败要合理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#用地形和敌人的位置传递信息"><span class="nav-number">4.</span> <span class="nav-text">用地形和敌人的位置传递信息</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#迷茫会破坏节奏"><span class="nav-number">5.</span> <span class="nav-text">迷茫会破坏节奏</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#玩游戏的原动力"><span class="nav-number">6.</span> <span class="nav-text">玩游戏的原动力</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、开心、不甘"><span class="nav-number">6.1.</span> <span class="nav-text">1、开心、不甘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、寻求满足"><span class="nav-number">6.2.</span> <span class="nav-text">2、寻求满足</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、寻求胜利"><span class="nav-number">6.3.</span> <span class="nav-text">3、寻求胜利</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、想炫耀"><span class="nav-number">6.4.</span> <span class="nav-text">4、想炫耀</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、想与其他人交流"><span class="nav-number">6.5.</span> <span class="nav-text">5、想与其他人交流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、想帮助别人"><span class="nav-number">6.6.</span> <span class="nav-text">6、想帮助别人</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、想获得谈资与朋友聊天"><span class="nav-number">6.7.</span> <span class="nav-text">7、想获得谈资与朋友聊天</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#小结"><span class="nav-number">7.</span> <span class="nav-text">小结</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#专栏"><span class="nav-number">8.</span> <span class="nav-text">专栏</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#对不同的程序员用不同方式聊需求"><span class="nav-number">8.1.</span> <span class="nav-text">对不同的程序员用不同方式聊需求</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chebin</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">5m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">75:23</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a></div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>



  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

</body>
</html>
